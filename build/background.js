"use strict";!function n(e,r,t){function o(u,c){if(!r[u]){if(!e[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var l=r[u]={exports:{}};e[u][0].call(l.exports,function(n){var r=e[u][1][n];return o(r||n)},l,l.exports,n,e,r,t)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(n,e,r){(function(n){function e(n,e){for(var r=0,t=n.length-1;t>=0;t--){var o=n[t];"."===o?n.splice(t,1):".."===o?(n.splice(t,1),r++):r&&(n.splice(t,1),r--)}if(e)for(;r--;r)n.unshift("..");return n}function t(n,e){if(n.filter)return n.filter(e);for(var r=[],t=0;t<n.length;t++)e(n[t],t,n)&&r.push(n[t]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(n){return o.exec(n).slice(1)};r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:n.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(r=u+"/"+r,o="/"===u.charAt(0))}return r=e(t(r.split("/"),function(n){return!!n}),!o).join("/"),(o?"/":"")+r||"."},r.normalize=function(n){var o=r.isAbsolute(n),i="/"===u(n,-1);return(n=e(t(n.split("/"),function(n){return!!n}),!o).join("/"))||o||(n="."),n&&i&&(n+="/"),(o?"/":"")+n},r.isAbsolute=function(n){return"/"===n.charAt(0)},r.join=function(){var n=Array.prototype.slice.call(arguments,0);return r.normalize(t(n,function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))},r.relative=function(n,e){function t(n){for(var e=0;e<n.length&&""===n[e];e++);for(var r=n.length-1;r>=0&&""===n[r];r--);return e>r?[]:n.slice(e,r-e+1)}n=r.resolve(n).substr(1),e=r.resolve(e).substr(1);for(var o=t(n.split("/")),i=t(e.split("/")),u=Math.min(o.length,i.length),c=u,s=0;s<u;s++)if(o[s]!==i[s]){c=s;break}var a=[];for(s=c;s<o.length;s++)a.push("..");return(a=a.concat(i.slice(c))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(n){var e=i(n),r=e[0],t=e[1];return r||t?(t&&(t=t.substr(0,t.length-1)),r+t):"."},r.basename=function(n,e){var r=i(n)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(n){return i(n)[3]};var u="b"==="ab".substr(-1)?function(n,e,r){return n.substr(e,r)}:function(n,e,r){return e<0&&(e=n.length+e),n.substr(e,r)}}).call(this,n("_process"))},{_process:2}],2:[function(n,e,r){function t(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(n){if(l===setTimeout)return setTimeout(n,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(n,0);try{return l(n,0)}catch(e){try{return l.call(null,n,0)}catch(e){return l.call(this,n,0)}}}function u(){v&&p&&(v=!1,p.length?m=p.concat(m):d=-1,m.length&&c())}function c(){if(!v){var n=i(u);v=!0;for(var e=m.length;e;){for(p=m,m=[];++d<e;)p&&p[d].run();d=-1,e=m.length}p=null,v=!1,function(n){if(f===clearTimeout)return clearTimeout(n);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(n);try{f(n)}catch(e){try{return f.call(null,n)}catch(e){return f.call(this,n)}}}(n)}}function s(n,e){this.fun=n,this.array=e}function a(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:t}catch(n){l=t}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(n){f=o}}();var p,m=[],v=!1,d=-1;h.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];m.push(new s(n,e)),1!==m.length||v||i(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(n){return[]},h.binding=function(n){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(n){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],3:[function(n,e,r){var t=n("path"),o=["page","link","image","video","audio"].map(function(n){return{name:n,menuId:"context_"+n}});chrome.runtime.onInstalled.addListener(function(){o.forEach(function(n){chrome.contextMenus.create({title:"Download resource "+n.name,contexts:[n.name],id:n.menuId})})}),chrome.contextMenus.onClicked.addListener(function(n,e){var r=o.find(function(e){return e.menuId==n.menuItemId}),i=n.srcUrl;"page"==r.name&&(i=n.pageUrl),console.log(t.basename(i)),$.jsonRPC.setup({endPoint:"http://localhost:6800/jsonrpc",namespace:"aria2"}),$.jsonRPC.request("addUri",{params:[[i],{}],success:function(n){console.log(n)},error:function(n){console.log(n)}})})},{path:1}]},{},[3]);